{"version":3,"sources":["index.js"],"names":["fs","require","test","TeleBot","bot","TEST_TELEBOT_TOKEN","TOKEN","TEST_TELEBOT_USER","USER","process","env","t","true","newSet","token","polling","interval","limit","timeout","retryTimeout","check","is","id","split","name","start","not","loopFn","deepEqual","flags","looping","poll","retry","stop","false","plan","len","event","eventList","get","list","length","count","size","delMe","on","removeEvent","cleanEvent","destroyEvent","defModCount","buildInPlugins","usePlugins","modList","x","all","mod","modRun","removeMod","opt","cacheTime","nextOffset","personal","answers","answerList","key","getMe","then","data","str","sendMessage","re","text","sendMethods","sendPhoto","readFileSync","__dirname","sendAudio","sendDocument","sendSticker","sendVideo","sendVoice","method","promise","Promise","resolve","loc","sendLocation","location","latitude","longitude","sendVenue","truthy","venue","sendContact","contact","sendAction","chatId","messageId","message_id","editMessageText","photo","caption","editMessageCaption","replyMarkup","inlineKeyboard","inlineButton","callback","editMessageReplyMarkup","obj","Object","keys"],"mappings":"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","file":"index.js","sourcesContent":["const fs = require('fs');\nconst test = require('ava');\nconst TeleBot = require('../lib/telebot.js');\n\n// Globals\nvar bot;\n\n// Enviroment data\n\nlet {\n    TEST_TELEBOT_TOKEN: TOKEN,\n    TEST_TELEBOT_USER: USER\n} = process.env;\n\ntest('bot environment', t => {\n\n    t.true(!!TOKEN, 'TEST_TELEBOT_TOKEN required');\n    t.true(!!USER, 'TEST_TELEBOT_USER required');\n\n});\n\ntest('bot object', t => {\n\n    const newSet = {\n        token: TOKEN,\n        polling: {\n            interval: 100,\n            limit: 50,\n            timeout: 0,\n            retryTimeout: 5000\n        }\n    };\n\n    function check(bot) {\n        t.is(bot.token, TOKEN);\n        t.is(bot.id, TOKEN.split(':')[0]);\n    }\n\n    check(new TeleBot(TOKEN));\n    check(bot = new TeleBot(newSet));\n\n    for (let name in newSet.polling) {\n        t.is(bot[name], newSet.polling[name]);\n    }\n\n    // Start\n    bot.start();\n    t.not(bot.loopFn, null);\n    t.deepEqual(bot.flags, {looping: true, poll: false, retry: false});\n\n    // Stop\n    bot.stop();\n    t.false(bot.flags.looping);\n\n});\n\ntest('events', t => {\n\n    t.plan(9);\n\n    function len(event) {\n        return bot.eventList.get(event).list.length;\n    }\n\n    function count() {\n        return bot.eventList.size;\n    }\n\n    var delMe = () => {\n    };\n\n    t.is(count(), 2);\n\n    // Set\n    bot.on('start', () => {\n    });\n    bot.on('start', delMe);\n    bot.on('custom', () => {\n    });\n    bot.on('custom', () => {\n    });\n    bot.on('custom', () => {\n    });\n\n    // Count\n    t.is(len('custom'), 3);\n    t.is(len('start'), 2);\n    t.is(count(), 3);\n\n    // Remove\n    t.true(bot.removeEvent('start', delMe));\n    t.is(len('start'), 1);\n\n    // Clean\n    t.true(bot.cleanEvent('custom'));\n\n    // Destroy\n    t.true(bot.destroyEvent('custom'));\n    t.is(count(), 2);\n\n});\n\ntest('mods', t => {\n\n    const defModCount = bot.buildInPlugins.length + bot.usePlugins.length;\n\n    function len(event) {\n        return bot.modList[event].length;\n    }\n\n    var delMe = x => x;\n\n    t.is(all(bot.modList), defModCount);\n\n    // Set\n    bot.mod('custom', x => ++x);\n    bot.mod('custom', x => ++x);\n    bot.mod('custom', delMe);\n    bot.mod('custom', x => ++x);\n\n    // Count\n    t.is(len('custom'), 4);\n    t.is(all(bot.modList), 1 + defModCount);\n\n    // Run\n    t.is(bot.modRun('custom', 5), 8);\n\n    // Remove\n    t.true(bot.removeMod('custom', delMe));\n    t.false(bot.removeMod('custom'));\n    t.false(bot.removeMod('not_found'));\n\n    t.is(len('custom'), 3);\n    t.is(all(bot.modList), 1 + defModCount);\n\n});\n\ntest('bot.answerList', t => {\n\n    const id = 8;\n\n    const opt = {\n        cacheTime: 200,\n        nextOffset: 3457,\n        personal: true\n    };\n\n    const answers = bot.answerList(id, opt);\n\n    t.is(answers.id, id);\n\n    for (let key in opt) {\n        t.is(answers[key], opt[key]);\n    }\n\n});\n\ntest('bot.getMe', t => {\n    return bot.getMe().then(data => {\n        t.true(data && data.id == bot.id);\n    });\n});\n\ntest('bot.sendMessage', t => {\n    let str = '#hello_test';\n    return bot.sendMessage(USER, str).then(re => {\n        t.true(re.text == str);\n    });\n});\n\nconst sendMethods = {\n    sendPhoto: {\n        'url': 'https://telegram.org/img/t_logo.png',\n        'buffer': fs.readFileSync(`${__dirname}/data/image.jpg`),\n        'file system': `${__dirname}/data/image.jpg`\n    },\n    sendAudio: {\n        'buffer': fs.readFileSync(`${__dirname}/data/audio.mp3`),\n        'file system': `${__dirname}/data/audio.mp3`\n    },\n    sendDocument: {\n        'buffer': fs.readFileSync(`${__dirname}/data/file.txt`),\n        'file system': `${__dirname}/data/file.txt`\n    },\n    sendSticker: {\n        'url': 'http://www.gstatic.com/webp/gallery/1.webp',\n        'buffer': fs.readFileSync(`${__dirname}/data/sticker.webp`),\n        'file system': `${__dirname}/data/sticker.webp`\n    },\n    sendVideo: {\n        'buffer': fs.readFileSync(`${__dirname}/data/video.mp4`),\n        'file system': `${__dirname}/data/video.mp4`\n    },\n    sendVoice: {\n        'buffer': fs.readFileSync(`${__dirname}/data/voice.m4a`),\n        'file system': `${__dirname}/data/voice.m4a`\n    }\n};\n\nfor (let method in sendMethods) {\n    let data = sendMethods[method];\n    test(`bot.${ method }`, t => {\n        let promise = Promise.resolve();\n        for (let name in data) {\n            promise = promise.then(() => {\n                return bot[method](USER, data[name]).then(re => t.true(!!re));\n            });\n        }\n        return promise;\n    });\n}\n\ntest('bot.sendLocation', t => {\n    let loc = [37.641401, -115.783262];\n    return bot.sendLocation(USER, loc).then(re => {\n        t.true(!!re);\n        t.deepEqual(re.location, {latitude: loc[0], longitude: loc[1]});\n    });\n});\n\ntest('bot.sendVenue', t => {\n    return bot.sendVenue(USER, [56.9713962, 23.9890801], 'A', 'B').then(re => {\n        t.truthy(re.venue);\n    });\n});\n\ntest('bot.sendContact', t => {\n    return bot.sendContact(USER, '112', 'First', 'Last').then(re => {\n        t.truthy(re.contact);\n    });\n});\n\ntest('bot.sendAction', t => {\n    return bot.sendAction(USER, 'typing').then(re => {\n        t.true(!!re);\n    });\n});\n\ntest('bot.editMessageText', t => {\n    return bot.sendMessage(USER, 'text').then(re => {\n        const chatId = USER;\n        const messageId = re.message_id;\n        return bot.editMessageText({chatId, messageId}, 'text OK');\n    }).then(re => t.true(!!re));\n});\n\ntest('bot.editMessageCaption', t => {\n    const photo = 'https://telegram.org/img/tl_card_destruct.gif';\n    return bot.sendPhoto(USER, photo, {caption: 'caption'}).then(re => {\n        const chatId = USER;\n        const messageId = re.message_id;\n        return bot.editMessageCaption({chatId, messageId}, 'caption OK');\n    }).then(re => t.true(!!re));\n});\n\ntest('bot.editMessageReplyMarkup', t => {\n    let replyMarkup = bot.inlineKeyboard([\n        [bot.inlineButton('test', {callback: 1})]\n    ]);\n    return bot.sendMessage(USER, 'markup', {replyMarkup}).then(re => {\n        const chatId = USER;\n        const messageId = re.message_id;\n        replyMarkup = bot.inlineKeyboard([[bot.inlineButton('OK', {callback: 2})]]);\n        return bot.editMessageReplyMarkup({chatId, messageId}, replyMarkup);\n    }).then(re => t.true(!!re));\n});\n\n// Functions\n\nfunction all(obj) {\n    return Object.keys(obj).length;\n}\n"]}